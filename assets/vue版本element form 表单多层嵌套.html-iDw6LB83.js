import{_ as s,o as n,c as a,a as p}from"./app-fr3Buw_y.js";const t={},o=p(`<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token operator">&lt;</span>el<span class="token operator">-</span>drawer v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;drawerVisible&quot;</span> <span class="token operator">:</span>destroy<span class="token operator">-</span>on<span class="token operator">-</span>close<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> size<span class="token operator">=</span><span class="token string">&quot;100vw&quot;</span> <span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">&quot;\`\${drawerProps.title}\`&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>form
      ref<span class="token operator">=</span><span class="token string">&quot;ruleFormRef&quot;</span>
      label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">&quot;140px&quot;</span>
      width<span class="token operator">=</span><span class="token string">&quot;800px&quot;</span>
      label<span class="token operator">-</span>suffix<span class="token operator">=</span><span class="token string">&quot; :&quot;</span>
      <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;rules&quot;</span>
      <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;drawerProps.isView&quot;</span>
      <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;drawerProps.row&quot;</span>
      <span class="token operator">:</span>hide<span class="token operator">-</span>required<span class="token operator">-</span>asterisk<span class="token operator">=</span><span class="token string">&quot;drawerProps.isView&quot;</span>
    <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;formContent&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;formContentBox&quot;</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(domain, index) in drawerProps.row!.formContent&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;formContentTopLine&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>button
                  <span class="token operator">:</span>icon<span class="token operator">=</span><span class="token string">&quot;Delete&quot;</span>
                  v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&quot;drawerProps.row!.formContent?.length &gt; 1&quot;</span>
                  <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;removeDomain(domain)&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item
            label<span class="token operator">=</span><span class="token string">&quot;问题描述&quot;</span>
            <span class="token operator">:</span>prop<span class="token operator">=</span><span class="token string">&quot;&#39;formContent.&#39; + index + &#39;.fieldName&#39;&quot;</span>
            <span class="token operator">:</span>rules<span class="token operator">=</span>&quot;<span class="token punctuation">{</span>
              required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              message<span class="token operator">:</span> <span class="token string">&#39;输入内容不能为空&#39;</span><span class="token punctuation">,</span>
              trigger<span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span>
            <span class="token punctuation">}</span>&quot;
          <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>input
              maxlength<span class="token operator">=</span><span class="token string">&quot;50&quot;</span>
              v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;domain.fieldName&quot;</span>
              <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;domain.sysDefaultFieldId &amp;&amp; domain.sysDefaultFieldId != &#39;&#39;&quot;</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">&quot;选项内容&quot;</span> <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button
              text
              <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;textColor&quot;</span>
              <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;addOptions(domain)&quot;</span>
              <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;domain.sysDefaultFieldId &amp;&amp; domain.sysDefaultFieldId != &#39;&#39;&quot;</span>
              <span class="token operator">&gt;</span>添加一个选项<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button
            <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(item1, index1) in domain?.fieldOption&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index1&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;16&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item
                  <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;&#39;选项&#39; + (index1 + 1)&quot;</span>
                  <span class="token operator">:</span>prop<span class="token operator">=</span><span class="token string">&quot;&#39;formContent.&#39; + index + &#39;.fieldOption.&#39; + index1&quot;</span>
                  <span class="token operator">:</span>rules<span class="token operator">=</span>&quot;<span class="token punctuation">{</span>
                    required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    message<span class="token operator">:</span> <span class="token string">&#39;选项内容不能为空&#39;</span><span class="token punctuation">,</span>
                    trigger<span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span>
                  <span class="token punctuation">}</span>&quot;
                <span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>input
                    maxlength<span class="token operator">=</span><span class="token string">&quot;20&quot;</span>
                    v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;domain.fieldOption[index1]&quot;</span>
                    <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;domain.sysDefaultFieldId &amp;&amp; domain.sysDefaultFieldId != &#39;&#39;&quot;</span>
                  <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item
              <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>button
                  <span class="token operator">:</span>icon<span class="token operator">=</span><span class="token string">&quot;Close&quot;</span>
                  link
                  size<span class="token operator">=</span><span class="token string">&quot;large&quot;</span>
                  v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&quot;domain?.fieldOption?.length &gt; 1&quot;</span>
                  <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;domain.sysDefaultFieldId &amp;&amp; domain.sysDefaultFieldId != &#39;&#39;&quot;</span>
                  <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;removeDomainSingle(domain, index1)&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;addDomain(3)&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span><span class="token operator">&gt;</span>单行文本<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;addDomain(1)&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span><span class="token operator">&gt;</span>单选题<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;addDomain(2)&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span><span class="token operator">&gt;</span>多选题<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

     
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">&gt;</span>

    <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token template-punctuation string">\`</span></span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">

    </span><span class="token template-punctuation string">\`</span></span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token template-punctuation string">\`</span></span>
    <span class="token keyword">const</span> drawerProps <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>DrawerProps<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  isView<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  title<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  formSysFieldArr<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  row<span class="token operator">:</span> <span class="token punctuation">{</span>
    formContent<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        fieldOption<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除题目</span>
<span class="token keyword">const</span> <span class="token function-variable function">removeDomain</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> index <span class="token operator">=</span> drawerProps<span class="token punctuation">.</span>value<span class="token punctuation">.</span>row<span class="token operator">!</span><span class="token punctuation">.</span>formContent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">,</span> item<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    drawerProps<span class="token punctuation">.</span>value<span class="token punctuation">.</span>row<span class="token operator">!</span><span class="token punctuation">.</span>formContent<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    drawerProps<span class="token punctuation">.</span>value<span class="token punctuation">.</span>row<span class="token operator">!</span><span class="token punctuation">.</span>formSysDefaultFields <span class="token operator">=</span> drawerProps<span class="token punctuation">.</span>value<span class="token punctuation">.</span>row<span class="token operator">!</span><span class="token punctuation">.</span>formSysDefaultFields<span class="token operator">?.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item1<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> item1 <span class="token operator">!=</span> item<span class="token punctuation">.</span>sysDefaultFieldId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 删除选项</span>
<span class="token keyword">const</span> <span class="token function-variable function">removeDomainSingle</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  item<span class="token punctuation">.</span>fieldOption<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">addDomain</span> <span class="token operator">=</span> <span class="token punctuation">(</span>fieldType<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span> fieldType<span class="token punctuation">)</span><span class="token punctuation">;</span>
  drawerProps<span class="token punctuation">.</span>value<span class="token punctuation">.</span>row<span class="token operator">!</span><span class="token punctuation">.</span>formContent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    fieldType<span class="token operator">:</span> fieldType<span class="token punctuation">,</span>
    isRequired<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    fieldName<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    fieldOption<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    fieldDescription<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    key<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">addOptions</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>fieldOption <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>fieldOption<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    item<span class="token punctuation">.</span>fieldOption<span class="token operator">?.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    item<span class="token punctuation">.</span>fieldOption <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="案例2" tabindex="-1"><a class="header-anchor" href="#案例2" aria-hidden="true">#</a> 案例2</h2><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;dynamicValidateForm&quot;</span> ref<span class="token operator">=</span><span class="token string">&quot;dynamicValidateForm&quot;</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">&quot;100px&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;demo-dynamic&quot;</span><span class="token operator">&gt;</span>
 
  <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item
    v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(domain, index) in dynamicValidateForm.domains&quot;</span>
    <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;&#39;域名&#39; + index&quot;</span>
    <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;domain.key&quot;</span>
    <span class="token operator">:</span>prop<span class="token operator">=</span><span class="token string">&quot;&#39;domains.&#39; + index + &#39;.value&#39;&quot;</span>
    <span class="token operator">:</span>rules<span class="token operator">=</span>&quot;<span class="token punctuation">{</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">&#39;域名不能为空&#39;</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span>
    <span class="token punctuation">}</span>&quot;
  <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;domain.value&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span><span class="token operator">&lt;</span>el<span class="token operator">-</span>button <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;removeDomain(domain)&quot;</span><span class="token operator">&gt;</span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;submitForm(&#39;dynamicValidateForm&#39;)&quot;</span><span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>button <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;addDomain&quot;</span><span class="token operator">&gt;</span>新增域名<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>button <span class="token decorator"><span class="token at operator">@</span><span class="token function">click</span></span><span class="token operator">=</span><span class="token string">&quot;resetForm(&#39;dynamicValidateForm&#39;)&quot;</span><span class="token operator">&gt;</span>重置<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        dynamicValidateForm<span class="token operator">:</span> <span class="token punctuation">{</span>
          domains<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            value<span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
          <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">submitForm</span><span class="token punctuation">(</span>formName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;submit!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;error submit!!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">resetForm</span><span class="token punctuation">(</span>formName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">removeDomain</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dynamicValidateForm<span class="token punctuation">.</span>domains<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>dynamicValidateForm<span class="token punctuation">.</span>domains<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">addDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dynamicValidateForm<span class="token punctuation">.</span>domains<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          value<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
          key<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
　
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中动态表单校验中用到了:prop=&quot;&#39;domains.&#39; + index + &#39;.value&#39;&quot; 而domains 是一个数组。 常规来说这么写相当于是 domains.1.value 的写法,但这种写法肯定是有问题的。没看源码不是很理解这样的链式操作。</p><p>感觉:prop=&quot;&#39;domains.&#39; + index + &#39;.value&#39;&quot; 这种写法错误的 会换成 :prop=&quot;&#39;domains[&#39; + index + &#39;].value&#39;&quot; 这种写法, 其实看了源码之后才明白 这两种写法都是正确的 1 . prop 接收的数据类型是String ,</p><ol start="2"><li>:prop=&quot;&#39;domains.&#39; + index + &#39;.value&#39;&quot; 和 :prop=&quot;&#39;domains[&#39; + index + &#39;].value&#39;&quot; 这两种传值最终都是转换成了 domains.0.value 字符串，这是一个字符串 而不是通过 domains.0 来取domains数组的第一个元素</li></ol><p>数组某一项写法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>    <span class="token operator">&lt;</span>div
            <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-box&quot;</span>
            <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;domain.key&quot;</span>
            v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span>&quot;<span class="token punctuation">(</span>domain<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token keyword">in</span> dynamicValidateForm<span class="token punctuation">.</span>healthRuleConfigs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
              <span class="token punctuation">.</span>secondHealthRuleConfigs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ruleConfigs&quot;
          <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;5&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item
                  <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-margin&quot;</span>
                  <span class="token operator">:</span>prop<span class="token operator">=</span><span class="token string">&quot;\`healthRuleConfigs.\${0}.secondHealthRuleConfigs.\${0}.ruleConfigs.\${index}.min\`&quot;</span>
                  <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;rules.activityRule&quot;</span>
                <span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>input
                    v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;domain.min&quot;</span>
                    placeholder<span class="token operator">=</span><span class="token string">&quot;请填写&quot;</span>
                  <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),e=[o];function l(c,r){return n(),a("div",null,e)}const u=s(t,[["render",l],["__file","vue版本element form 表单多层嵌套.html.vue"]]);export{u as default};
